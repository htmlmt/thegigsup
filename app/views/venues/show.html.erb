<p id="notice"><%= notice %></p>

<div class="events--list">
    <div class="list--month">
        <h1><%= @dates.first.strftime("%^B") %></h1>
    </div>
    <% if @dates.count == 0 %>
        <div class="list--day">
            <div class="day--number">
            </div>
            <div class="day--info">
                <div class="info--container">
                    <div class="info--title">
                        <h2>No events listed.</h2>
                    </div>
                </div>
            </div>
        </div>
    <% end %>
    <% months = [] %>
    <% @dates.each do |date| %>
        <% if @dates.first.strftime("%^B") != date.strftime("%^B") %>
            <% unless months.include? date.strftime("%^B") %>
                <div class="list--month">
                    <h1><%= date.strftime("%^B") %></h1>
                </div>
                <% months << date.strftime("%^B") %>
            <% end %>
        <% end %>
        <div class="list--day">
            <div class="day--number">
                <h4><%= date.strftime("%e") %></h4>
                <p><%= date.strftime("%a") %></p>
            </div>
            <div class="day--info">
                <% events = Event.where(venue_id: @venue.id).where('start BETWEEN ? AND ?', date, date.end_of_day).order(:start) %>
                <% events.each do |event| %>
                    <div class="info--container">
                        <div class="info--title">
                            <h2>
                                <% event.bands.each do |band| %>
                                    <%= link_to band.name, band_path(band) %><br>
                                <% end %>
                            </h2>
                            <h3>
                                <%= link_to event.venue.name, venue_path(event.venue) %>
                            </h3>
                        </div>
                        <div class="info--time">
                            <p>
                                <%= event.start.in_time_zone.strftime("%l:%M %P") %>
                            </p>
                        </div>
                    </div>
                <% end %>
            </div>
        </div>
    <% end %>
</div>
